appId: host.exp.Exponent
---
# V2 战斗系统 UI 与功能测试

- launchApp

# 从 Expo Go 进入应用
- runFlow:
    when:
      visible: "Recently opened"
    commands:
      - tapOn:
          text: "汉字小勇士"
          index: 0

# 等待首页加载
- extendedWaitUntil:
    visible: "开始冒险"
    timeout: 15000

# 进入课本选择
- tapOn:
    id: "start-adventure-btn"

- extendedWaitUntil:
    visible: "选择课本"
    timeout: 5000

# 选择一年级上册（字数较少）
# 使用坐标点击左上角的一年级上册卡片
- tapOn:
    point: "25%,35%"

- extendedWaitUntil:
    visible: "V2"
    timeout: 5000

- takeScreenshot: "v2_01_levels_page"

# === 进入 V2 战斗 ===
- tapOn:
    text: "V2"
    index: 0

# 等待战斗界面加载（等待清除按钮出现）
- extendedWaitUntil:
    visible: "清除"
    timeout: 10000

- takeScreenshot: "v2_02_battle_loaded"

# === UI 可见性验证 ===

# 验证清除按钮
- assertVisible: "清除"

# 验证确定按钮
- assertVisible: "确定"

- takeScreenshot: "v2_03_ui_elements_verified"

# === 测试书写区域交互 ===
# 在田字格中央绘制一笔（模拟书写）
- swipe:
    start: "40%,55%"
    end: "60%,65%"

- takeScreenshot: "v2_04_after_stroke"

# === 测试清除按钮 ===
- tapOn: "清除"

- takeScreenshot: "v2_05_after_clear"

# === 再次书写并提交 ===
- swipe:
    start: "40%,55%"
    end: "60%,65%"

- tapOn: "确定"

- takeScreenshot: "v2_06_after_submit"

# === 等待 OCR 识别结果 ===
- assertVisible: "清除"
- takeScreenshot: "v2_07_ocr_result"

# === 测试完成 ===
# V2 战斗界面核心功能已验证：
# - 战斗界面加载正常
# - 田字格书写区域正常
# - 清除/确定按钮功能正常
# - 怪物移动动画正常

- takeScreenshot: "v2_08_test_complete"
